@model AGO.WebApiApp.Controllers.SysConfigData

// Development section begin

sysConfig = {
	src: function(path) {
		return '@Model.SrcPath/' + path;
    },
    site: function(path) {
		return '@Model.SitePath' + path;
    },
    modules: {},
	module: "@Model.Module",
	project: "@Model.Project",
    lang: getLang(),
    // make dalay in milliseconds before $http requests when use fake backend
    delay: 0,
	supportedLocales: sysConfig.supportedLocales
};


yepnope({
    load: [
        sysConfig.src('components/include.js'),
        sysConfig.src('components/lang/include.' + sysConfig.lang + '.js'),
        sysConfig.src('core/include.js'),
        sysConfig.src('backend/include.js'),
        sysConfig.src(sysConfig.module + '/include.js')
    ],
    complete: function() {

        sysConfig.modules['components'].js = [].concat(
            sysConfig.modules['components'].js,
            sysConfig.modules['components.lang'].js
        );

        sysConfig.modules['core'].js = [].concat(
            sysConfig.modules['core'].js, [
                sysConfig.src('core/lang/core.' + sysConfig.lang + '.js')
            ]
        );

        sysConfig.modules[sysConfig.module].js = [].concat(
            sysConfig.modules[sysConfig.module].js, [
                sysConfig.src(sysConfig.module + '/lang/' + sysConfig.module + '.' + sysConfig.lang + '.js')
            ]
        );

        LoadResources(function() {
            angular.element(document).ready(function() {

                angular.module('core.templates', []);
                angular.module(sysConfig.module + '.templates', []);

                angular.module('core')
                    .constant('currentProject', '@Model.Project') //TODO remove, if project in sysConfig enough
                    .constant('userGroups', [])
                    .constant('sysConfig', sysConfig);

                angular.bootstrap(document, [].concat(
                    (sysConfig.fakeBackend ? ['backend'] : []), ['core', sysConfig.module]
                ));
            });
        });

    }
});

// Development section end